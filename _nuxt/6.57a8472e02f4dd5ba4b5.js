(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{210:function(e,t,r){var o,n;void 0===(n="function"==typeof(o=function(){return function(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var base=document.createElement("base");if(base.href=arguments[0],1===e)return base.href;var head=document.getElementsByTagName("head")[0];head.insertBefore(base,head.firstChild);for(var t,a=document.createElement("a"),r=1;r<e;r++)a.href=arguments[r],t=a.href,base.href=t;return head.removeChild(base),t}})?o.call(t,r,t,e):o)||(e.exports=n)},225:function(e,t){let r=!1,o=()=>{};e.exports={logging:r,setLogging:e=>{r=e},setCustomLogger:e=>{o=e},log:(e,t)=>{o({type:e,message:t}),r&&console.log(`[${e}] ${t}`)}}},226:function(e,t,r){const o=r(262),n=r(263),c=r(264);e.exports={defaultOptions:o,getCreateFFmpegCore:n,fetchFile:c}},227:function(e){e.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.9.7","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.8.5","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.2.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},"_resolved":"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.9.7.tgz","_integrity":"sha512-WpZkNnqYGoaMcMd1EpaDi7nxRyEd05OjOTAfItH/ZwvAKJpr7ksvHKTC/NjP0li6mFrTFLGudP81J1tG0babdg==","_from":"@ffmpeg/ffmpeg@0.9.7"}')},257:function(e,t,r){var o=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",f=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function h(e,t,r,o){var n=t&&t.prototype instanceof y?t:y,c=Object.create(n.prototype),f=new C(o||[]);return c._invoke=function(e,t,r){var o="suspendedStart";return function(n,c){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw c;return A()}for(r.method=n,r.arg=c;;){var f=r.delegate;if(f){var l=P(f,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var h=m(e,t,r);if("normal"===h.type){if(o=r.done?"completed":"suspendedYield",h.arg===d)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(o="completed",r.method="throw",r.arg=h.arg)}}}(e,r,f),c}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var d={};function y(){}function w(){}function v(){}var x={};x[n]=function(){return this};var E=Object.getPrototypeOf,F=E&&E(E(S([])));F&&F!==t&&r.call(F,n)&&(x=F);var L=v.prototype=y.prototype=Object.create(x);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var o;this._invoke=function(n,c){function f(){return new t((function(o,f){!function o(n,c,f,l){var h=m(e[n],e,c);if("throw"!==h.type){var d=h.arg,y=d.value;return y&&"object"==typeof y&&r.call(y,"__await")?t.resolve(y.__await).then((function(e){o("next",e,f,l)}),(function(e){o("throw",e,f,l)})):t.resolve(y).then((function(e){d.value=e,f(d)}),(function(e){return o("throw",e,f,l)}))}l(h.arg)}(n,c,o,f)}))}return o=o?o.then(f,f):f()}}function P(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,P(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=m(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var n=o.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function S(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return w.prototype=L.constructor=v,v.constructor=w,w.displayName=l(v,f,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,f,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},j(_.prototype),_.prototype[c]=function(){return this},e.AsyncIterator=_,e.async=function(t,r,o,n,c){void 0===c&&(c=Promise);var f=new _(h(t,r,o,n),c);return e.isGeneratorFunction(r)?f:f.next().then((function(e){return e.done?e.value:f.next()}))},j(L),l(L,f,"Generator"),L[n]=function(){return this},L.toString=function(){return"[object Generator]"},e.keys=function(object){var e=[];for(var t in object)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in object)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=S,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(r,o){return c.type="throw",c.arg=e,t.next=r,o&&(t.method="next",t.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],c=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var f=r.call(n,"catchLoc"),l=r.call(n,"finallyLoc");if(f&&l){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(f){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var c=n?n.completion:{};return c.type=e,c.arg=t,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),O(t),d}},catch:function(e){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;O(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}(e.exports);try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}},258:function(e,t,r){const{defaultArgs:o,baseOptions:n}=r(259),{setLogging:c,setCustomLogger:f,log:l}=r(225),h=r(260),m=r(261),{defaultOptions:d,getCreateFFmpegCore:y}=r(226),{version:w}=r(227),v=Error("ffmpeg.wasm is not ready, make sure you have completed load().");e.exports=(e={})=>{const{log:t,logger:r,progress:x,...E}={...n,...d,...e};let F=null,L=null,j=null,_=!1,progress=x;const P=({type:e,message:t})=>{l(e,t),h(t,progress),(e=>{"FFMPEG_END"===e&&null!==j&&(j(),j=null,_=!1)})(t)};return c(t),f(r),l("info","use ffmpeg.wasm v"+w),{setProgress:e=>{progress=e},setLogger:e=>{f(e)},setLogging:c,load:async()=>{if(l("info","load ffmpeg-core"),null!==F)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{l("info","loading ffmpeg-core");const{createFFmpegCore:e,corePath:t,workerPath:r,wasmPath:o}=await y(E);F=await e({mainScriptUrlOrBlob:t,printErr:e=>P({type:"fferr",message:e}),print:e=>P({type:"ffout",message:e}),locateFile:(path,e)=>{if("undefined"!=typeof window){if(void 0!==o&&path.endsWith("ffmpeg-core.wasm"))return o;if(void 0!==r&&path.endsWith("ffmpeg-core.worker.js"))return r}return e+path}}),L=F.cwrap("proxy_main","number",["number","number"]),l("info","ffmpeg-core loaded")}},isLoaded:()=>null!==F,run:(...e)=>{if(l("info","run ffmpeg command: "+e.join(" ")),null===F)throw v;if(_)throw Error("ffmpeg.wasm can only run one command at a time");return _=!0,new Promise(t=>{const r=[...o,...e].filter(s=>0!==s.length);j=t,L(...m(F,r))})},FS:(e,...t)=>{if(l("info",`run FS.${e} ${t.map(e=>"string"==typeof e?e:`<${e.length} bytes binary file>`).join(" ")}`),null===F)throw v;{let r=null;try{r=F.FS[e](...t)}catch(r){throw"readdir"===e?Error(`ffmpeg.FS('readdir', '${t[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`):"readFile"===e?Error(`ffmpeg.FS('readFile', '${t[0]}') error. Check if the path exists`):Error("Oops, something went wrong in FS operation.")}return r}}}}},259:function(e,t){e.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},260:function(e,t){let r=0;const o=e=>{const[t,r,s]=e.split(":");return 60*parseFloat(t)*60+60*parseFloat(r)+parseFloat(s)};e.exports=(e,progress)=>{if("string"==typeof e)if(e.startsWith("  Duration")){const t=e.split(", ")[0].split(": ")[1],n=o(t);(0===r||r>n)&&(r=n)}else if(e.startsWith("frame")||e.startsWith("size")){const t=e.split("time=")[1].split(" ")[0];progress({ratio:o(t)/r})}else e.startsWith("video:")&&(progress({ratio:1}),r=0)}},261:function(e,t){e.exports=(e,t)=>{const r=e._malloc(t.length*Uint32Array.BYTES_PER_ELEMENT);return t.forEach((s,t)=>{const o=e._malloc(s.length+1);e.writeAsciiToMemory(s,o),e.setValue(r+Uint32Array.BYTES_PER_ELEMENT*t,o,"i32")}),[t.length,r]}},262:function(e,t,r){(function(t){const o=r(210),{devDependencies:n}=r(227);e.exports={corePath:void 0!==t&&"development"===t.env.FFMPEG_ENV?o("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):`https://unpkg.com/@ffmpeg/core@${n["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}}).call(this,r(63))},263:function(e,t,r){const o=r(210),{log:n}=r(225),c=async(e,t)=>{n("info","fetch "+e);const r=await(await fetch(e)).arrayBuffer();n("info",`${e} file size = ${r.byteLength} bytes`);const o=new Blob([r],{type:t}),c=URL.createObjectURL(o);return n("info",`${e} blob URL = ${c}`),c};e.exports=async({corePath:e})=>{if("string"!=typeof e)throw Error("corePath should be a string!");const t=o(e),r=await c(t,"application/javascript"),f=await c(t.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),l=await c(t.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(e=>{const script=document.createElement("script"),t=()=>{script.removeEventListener("load",t),n("info","ffmpeg-core.js script loaded"),e({createFFmpegCore:createFFmpegCore,corePath:r,wasmPath:f,workerPath:l})};script.src=r,script.type="text/javascript",script.addEventListener("load",t),document.getElementsByTagName("head")[0].appendChild(script)}):(n("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:r,wasmPath:f,workerPath:l}))}},264:function(e,t,r){const o=r(210);e.exports=async e=>{let data=e;if(void 0===e)return new Uint8Array;if("string"==typeof e)if(/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e))data=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(o(e));data=await t.arrayBuffer()}else(e instanceof File||e instanceof Blob)&&(data=await(t=e,new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=({target:{error:{code:code}}})=>{r(Error("File could not be read! Code="+code))},o.readAsArrayBuffer(t)})));var t;return new Uint8Array(data)}},273:function(e,t,r){r(257);const o=r(258),{fetchFile:n}=r(226);e.exports={createFFmpeg:o,fetchFile:n}}}]);