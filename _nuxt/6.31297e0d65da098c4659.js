(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{388:function(e,t,r){var o,n;void 0===(n="function"==typeof(o=function(){return function(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var base=document.createElement("base");if(base.href=arguments[0],1===e)return base.href;var head=document.getElementsByTagName("head")[0];head.insertBefore(base,head.firstChild);for(var t,a=document.createElement("a"),r=1;r<e;r++)a.href=arguments[r],t=a.href,base.href=t;return head.removeChild(base),t}})?o.call(t,r,t,e):o)||(e.exports=n)},404:function(e,t){let r=!1,o=()=>{};e.exports={logging:r,setLogging:e=>{r=e},setCustomLogger:e=>{o=e},log:(e,t)=>{o({type:e,message:t}),r&&console.log(`[${e}] ${t}`)}}},405:function(e,t,r){const o=r(452),n=r(453),f=r(454);e.exports={defaultOptions:o,getCreateFFmpegCore:n,fetchFile:f}},406:function(e){e.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.9.7","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node --experimental-wasm-threads --experimental-wasm-bulk-memory node_modules/.bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.8.5","@types/emscripten":"^1.39.4","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.2.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"},"_resolved":"https://registry.npmjs.org/@ffmpeg/ffmpeg/-/ffmpeg-0.9.7.tgz","_integrity":"sha512-WpZkNnqYGoaMcMd1EpaDi7nxRyEd05OjOTAfItH/ZwvAKJpr7ksvHKTC/NjP0li6mFrTFLGudP81J1tG0babdg==","_from":"@ffmpeg/ffmpeg@0.9.7"}')},448:function(e,t,r){const{defaultArgs:o,baseOptions:n}=r(449),{setLogging:f,setCustomLogger:l,log:c}=r(404),m=r(450),d=r(451),{defaultOptions:h,getCreateFFmpegCore:w}=r(405),{version:y}=r(406),F=Error("ffmpeg.wasm is not ready, make sure you have completed load().");e.exports=(e={})=>{const{log:t,logger:r,progress:v,...E}={...n,...h,...e};let x=null,j=null,P=null,k=!1,progress=v;const C=({type:e,message:t})=>{c(e,t),m(t,progress),(e=>{"FFMPEG_END"===e&&null!==P&&(P(),P=null,k=!1)})(t)};return f(t),l(r),c("info","use ffmpeg.wasm v"+y),{setProgress:e=>{progress=e},setLogger:e=>{l(e)},setLogging:f,load:async()=>{if(c("info","load ffmpeg-core"),null!==x)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{c("info","loading ffmpeg-core");const{createFFmpegCore:e,corePath:t,workerPath:r,wasmPath:o}=await w(E);x=await e({mainScriptUrlOrBlob:t,printErr:e=>C({type:"fferr",message:e}),print:e=>C({type:"ffout",message:e}),locateFile:(path,e)=>{if("undefined"!=typeof window){if(void 0!==o&&path.endsWith("ffmpeg-core.wasm"))return o;if(void 0!==r&&path.endsWith("ffmpeg-core.worker.js"))return r}return e+path}}),j=x.cwrap("proxy_main","number",["number","number"]),c("info","ffmpeg-core loaded")}},isLoaded:()=>null!==x,run:(...e)=>{if(c("info","run ffmpeg command: "+e.join(" ")),null===x)throw F;if(k)throw Error("ffmpeg.wasm can only run one command at a time");return k=!0,new Promise(t=>{const r=[...o,...e].filter(s=>0!==s.length);P=t,j(...d(x,r))})},FS:(e,...t)=>{if(c("info",`run FS.${e} ${t.map(e=>"string"==typeof e?e:`<${e.length} bytes binary file>`).join(" ")}`),null===x)throw F;{let r=null;try{r=x.FS[e](...t)}catch(r){throw"readdir"===e?Error(`ffmpeg.FS('readdir', '${t[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`):"readFile"===e?Error(`ffmpeg.FS('readFile', '${t[0]}') error. Check if the path exists`):Error("Oops, something went wrong in FS operation.")}return r}}}}},449:function(e,t){e.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},450:function(e,t){let r=0;const o=e=>{const[t,r,s]=e.split(":");return 60*parseFloat(t)*60+60*parseFloat(r)+parseFloat(s)};e.exports=(e,progress)=>{if("string"==typeof e)if(e.startsWith("  Duration")){const t=e.split(", ")[0].split(": ")[1],n=o(t);(0===r||r>n)&&(r=n)}else if(e.startsWith("frame")||e.startsWith("size")){const t=e.split("time=")[1].split(" ")[0];progress({ratio:o(t)/r})}else e.startsWith("video:")&&(progress({ratio:1}),r=0)}},451:function(e,t){e.exports=(e,t)=>{const r=e._malloc(t.length*Uint32Array.BYTES_PER_ELEMENT);return t.forEach((s,t)=>{const o=e._malloc(s.length+1);e.writeAsciiToMemory(s,o),e.setValue(r+Uint32Array.BYTES_PER_ELEMENT*t,o,"i32")}),[t.length,r]}},452:function(e,t,r){(function(t){const o=r(388),{devDependencies:n}=r(406);e.exports={corePath:void 0!==t&&"development"===t.env.FFMPEG_ENV?o("/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"):`https://unpkg.com/@ffmpeg/core@${n["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`}}).call(this,r(173))},453:function(e,t,r){const o=r(388),{log:n}=r(404),f=async(e,t)=>{n("info","fetch "+e);const r=await(await fetch(e)).arrayBuffer();n("info",`${e} file size = ${r.byteLength} bytes`);const o=new Blob([r],{type:t}),f=URL.createObjectURL(o);return n("info",`${e} blob URL = ${f}`),f};e.exports=async({corePath:e})=>{if("string"!=typeof e)throw Error("corePath should be a string!");const t=o(e),r=await f(t,"application/javascript"),l=await f(t.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),c=await f(t.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return"undefined"==typeof createFFmpegCore?new Promise(e=>{const script=document.createElement("script"),t=()=>{script.removeEventListener("load",t),n("info","ffmpeg-core.js script loaded"),e({createFFmpegCore:createFFmpegCore,corePath:r,wasmPath:l,workerPath:c})};script.src=r,script.type="text/javascript",script.addEventListener("load",t),document.getElementsByTagName("head")[0].appendChild(script)}):(n("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore:createFFmpegCore,corePath:r,wasmPath:l,workerPath:c}))}},454:function(e,t,r){const o=r(388);e.exports=async e=>{let data=e;if(void 0===e)return new Uint8Array;if("string"==typeof e)if(/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e))data=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(o(e));data=await t.arrayBuffer()}else(e instanceof File||e instanceof Blob)&&(data=await(t=e,new Promise((e,r)=>{const o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=({target:{error:{code:code}}})=>{r(Error("File could not be read! Code="+code))},o.readAsArrayBuffer(t)})));var t;return new Uint8Array(data)}},463:function(e,t,r){r(29);const o=r(448),{fetchFile:n}=r(405);e.exports={createFFmpeg:o,fetchFile:n}}}]);