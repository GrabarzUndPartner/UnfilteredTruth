(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{257:function(t,e,r){"use strict";r.r(e);r(46),r(8),r(29);var n=r(4),o=(r(248),r(27),r(38),r(35),r(47),r(406),r(410),r(411),r(412),r(413),r(414),r(415),r(416),r(417),r(418),r(419),r(420),r(421),r(422),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(39),r(178),r(179)),c=r(180),l=r(472),f=r.n(l),video=r(443),d=["video/quicktime","video/mp4"],h=function(){function t(data){Object(o.a)(this,t),this.data=data,this.name=data.name}var e,r,l,h,v;return Object(c.a)(t,[{key:"hasValidSize",value:function(){return this.data.size<188743680}},{key:"hasValidMimeType",value:(v=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMimeType();case 2:return e=t.sent,t.abrupt("return",d.includes(e));case 4:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"hasValidLength",value:(h=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hasValidMimeType();case 2:if(!t.sent){t.next=13;break}return t.t0=video.a,t.next=6,this.getObjectUrl();case 6:return t.t1=t.sent,t.next=9,(0,t.t0)(t.t1);case 9:return t.t2=t.sent,t.abrupt("return",t.t2<60);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getMimeType",value:(l=Object(n.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getBuffer();case 2:return e=t.sent,t.next=5,f.a.fromBuffer(e);case 5:return t.abrupt("return",t.sent.mime);case 6:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getObjectUrl",value:(r=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=URL,t.next=3,this.getBlob();case 3:return t.t1=t.sent,t.abrupt("return",t.t0.createObjectURL.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getBlob",value:(e=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Blob,t.next=3,this.getBuffer();case 3:return t.t1=t.sent,t.t2=[t.t1],t.t3=this.getMimeType(),t.abrupt("return",new t.t0(t.t2,t.t3));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getBuffer",value:function(){var t=this;return new Promise((function(e){var r=new FileReader;r.addEventListener("load",(function(){e(new Uint8Array(r.result))}),!1),r.readAsArrayBuffer(t.data)}))}}]),t}(),v={props:{text:{type:String,default:null}}},m=(r(496),r(18)),x=Object(m.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("span",{key:this.text},[this._v(this._s(this.text))])])}),[],!1,null,"4c84fcdc",null).exports,y={components:{AtomTextToggle:x},data:function(){return{error:null,highlight:!1}},methods:{onChange:function(t){var e=this,r=t.target.files;Array.from(r).map((function(t){return new h(t)})).map(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.hasValidMimeType();case 2:if(!t.sent){t.next=12;break}return t.next=5,r.hasValidLength();case 5:if(!t.sent){t.next=9;break}r.hasValidSize()?e.$emit("files-change",r):e.error="file is too big",t.next=10;break;case 9:e.error="your video is too long";case 10:t.next=13;break;case 12:e.error="wrong file format";case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},hover:function(t){this.highlight=t}}},w=(r(498),Object(m.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"atom-upload",class:{highlight:t.highlight},on:{dragenter:function(e){return t.hover(!0)},dragover:function(e){return t.hover(!0)},dragleave:function(e){return t.hover(!1)},drop:function(e){return t.hover(!1)}}},[r("input",{attrs:{type:"file"},on:{change:t.onChange}}),t._v(" "),r("div",[r("span",[t._v("Drag & Drop File")]),t._v(" "),r("atom-text-toggle",{attrs:{text:t.error}})],1)])}),[],!1,null,"97f327dc",null).exports),k=(r(33),r(364),r(500),{props:{radius:{type:Number,default:1},progress:{type:Number,default:0},stroke:{type:Number,default:1}},data:function(){var t=this.radius-2*this.stroke;return{normalizedRadius:t,circumference:2*t*Math.PI}},computed:{viewBox:function(){return"0 0 ".concat(2*this.radius," ").concat(2*this.radius)},strokeDashoffset:function(){return this.circumference-this.progress/100*this.circumference},percentage:function(){return this.progress.toFixed(2)}}}),j=(r(502),Object(m.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("svg",{attrs:{viewBox:t.viewBox}},[r("circle",{style:{strokeDashoffset:t.strokeDashoffset},attrs:{stroke:"white",fill:"transparent","stroke-dasharray":t.circumference+" "+t.circumference,"stroke-width":t.stroke,r:t.normalizedRadius,cx:t.radius,cy:t.radius}})]),t._v(" "),r("span",[t._v(t._s(t.percentage)+"%")])])}),[],!1,null,"51517435",null).exports);function _(){return new Worker(r.p+"worker.556897f823c56627d0c1.worker.js")}var O=r(242),R=r(73),M=r(161),map=r(37),filter=r(360),B=r(504),C=r.n(B),A=r(505);function z(){var t={ready:new O.a(1),start:new R.a,done:new R.a,info:new O.a(1),progress:new R.a,error:new O.a(1)};t.info.next("initialize");var e=new _,r=Object(M.a)(e,"message").pipe(Object(map.a)((function(t){return t.data})));return r.pipe(Object(filter.a)((function(data){return"ready"===data.type}))).subscribe((function(r){t.ready.next(e)})),r.pipe(Object(filter.a)((function(data){return"stdout"===data.type}))).subscribe((function(e){var data=e.data;C()(data,(function(e){var r=e.ratio;t.progress.next(r)}))})),r.pipe(Object(filter.a)((function(data){return"start"===data.type}))).subscribe((function(e){var data=e.data;t.start.next(data),t.info.next("start conversion")})),r.pipe(Object(filter.a)((function(data){return"done"===data.type}))).subscribe(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return data=n.data,e.terminate(),t.info.next("finished conversion"),r.t0=t.done,r.next=6,new h(new Blob([data[0].data])).getObjectUrl();case 6:r.t1=r.sent,r.t0.next.call(r.t0,r.t1);case 8:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()),t}function T(t){return E.apply(this,arguments)}function E(){return(E=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Promise,t.t1=e.getBuffer().then((function(data){return{name:e.name,data:data}})),t.t2=video.a,t.next=5,e.getObjectUrl();case 5:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3).then((function(t){return{name:"".concat(e.name,".wav"),data:new A.a(t).getBuffer()}})),t.t5=[t.t1,t.t4],t.abrupt("return",t.t0.all.call(t.t0,t.t5));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){var e=z();return e.ready.subscribe((function(r){e.info.next("load file"),function(t,e){U.apply(this,arguments)}(r,t)})),e}function U(){return(U=Object(n.a)(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(r);case 2:n=t.sent,e.postMessage({type:"command",arguments:["-i",r.name,"-i","".concat(r.name,".wav"),"-strict","-2","-ac","2","-preset","ultrafast","-map_metadata:s:v","0:s:v","-map_metadata:s:a","0:s:a","-filter_complex","[0:v]setpts=0.98*PTS,scale=iw/2:ih/2,showinfo[v];[0:a]volume=1[a0];[1:a]volume=1.75[a1];[a0]atempo=1.02[a00];[a00][a1]amix=inputs=2:duration=first:dropout_transition=2[a]","-map","[v]","-map","[a]","output.mp4"],files:n});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P={components:{AtomUpload:w,AtomProgress:j,AtomTextToggle:x},props:{id:{type:String,default:null}},data:function(){return{stats:this.resetStats()}},methods:{resetStats:function(t){return{blob:null,info:null,error:t,progress:0,upload:null}},onFilesChange:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.stats=e.resetStats(),r.next=3,t.getObjectUrl();case 3:return n.upload=r.sent,r.t0=e,r.next=7,S(t);case 7:return r.t1=r.sent,r.t2=n,r.next=11,r.t0.observeConversion.call(r.t0,r.t1,r.t2);case 11:o=r.sent,e.$emit("ready",{id:e.id,stats:o});case 13:case"end":return r.stop()}}),r)})))()},observeConversion:function(t,e){var r=this;return t.start.subscribe((function(t){console.log(t)})),t.progress.subscribe((function(progress){e.progress=100*progress})),t.info.subscribe((function(t){e.info=t})),t.error.subscribe((function(t){r.stats=r.resetStats(t)})),new Promise((function(r){t.done.subscribe((function(t){e.blob=t,r(e)}))}))}}},$=(r(507),Object(m.a)(P,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"molecule_upload-modifier"},[r("div",{staticClass:"container"},[t.stats.upload?t._e():r("atom-upload",{staticClass:"upload",on:{"files-change":t.onFilesChange}}),t._v(" "),t.stats.progress?t._e():r("atom-text-toggle",{attrs:{text:t.stats.info}}),t._v(" "),t.stats.progress?r("atom-progress",{staticClass:"progress",attrs:{stroke:5,radius:60,progress:t.stats.progress}}):t._e(),t._v(" "),t.stats.blob?r("video",{ref:"video",staticClass:"preview",attrs:{src:t.stats.blob,controls:"",playsinline:""}}):t._e()],1),t._v(" "),t.stats.blob?r("a",{attrs:{href:t.stats.blob,download:t.stats.upload.name}},[t._v("Download")]):t._e()])}),[],!1,null,"e851dff6",null).exports),D=r(397).a,V=Object(m.a)(D,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"waveform"})])}),[],!1,null,null,null).exports;r(79);function F(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}var L={components:{MoleculeUploadModifier:$,MoleculeWavesurfer:V},data:function(){return{conversions:[{id:F(),stats:null}]}},methods:{onReady:function(t){console.log(t),this.conversions.find((function(e){return e.id===t.id})).stats=t.stats,this.conversions.push({id:F(),stats:null})}}},N=(r(509),Object(m.a)(L,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ul",t._l(t.conversions,(function(e,n){var o=e.id,c=e.stats;return r("li",{key:n},[r("molecule-upload-modifier",{attrs:{id:o},on:{ready:t.onReady}}),t._v(" "),c?r("molecule-wavesurfer",{attrs:{stats:c}}):t._e()],1)})),0)])}),[],!1,null,"47c39e7e",null));e.default=N.exports},397:function(t,e,r){"use strict";(function(t){r(45),r(8),r(60),r(29);var n=r(4);function o(e){var video=t.document.createElement("video");return video.src=e,video}e.a={props:{stats:{type:Object,default:function(){return null}}},data:function(){return{list:[],wavesurfer:null,playing:!1}},computed:{buttonText:function(){return this.playing?"Pause":"Play"}},mounted:function(){var t=this;[o(this.stats.upload),o(this.stats.blob)].forEach(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initializeWavesurfer();case 2:(n=e.sent).load(r),t.list.push(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},methods:{initializeWavesurfer:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(32).then(r.t.bind(null,541,7));case 2:return n=e.sent.default,e.abrupt("return",n.create({container:t.$refs.waveform,waveColor:"#A8DBA8",progressColor:"#3B8686",splitChannels:!1,interact:!1,backend:"MediaElement"}));case 4:case"end":return e.stop()}}),e)})))()}}}}).call(this,r(32))},443:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return n}));r(8);function n(e){return new Promise((function(r){var video=t.document.createElement("video");video.preload="metadata",video.src=e,video.onloadedmetadata=function(t){r(video.duration)}}))}}).call(this,r(32))},444:function(t,e,r){var content=r(497);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(59).default)("d7b4aa3e",content,!0,{sourceMap:!1})},445:function(t,e,r){var content=r(499);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(59).default)("d8588cae",content,!0,{sourceMap:!1})},446:function(t,e,r){var content=r(503);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(59).default)("0f6e229e",content,!0,{sourceMap:!1})},447:function(t,e,r){var content=r(508);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(59).default)("32d7a630",content,!0,{sourceMap:!1})},448:function(t,e,r){var content=r(510);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(59).default)("070fa966",content,!0,{sourceMap:!1})},477:function(t,e){},479:function(t,e){},496:function(t,e,r){"use strict";r(444)},497:function(t,e,r){(e=r(58)(!1)).push([t.i,"span[data-v-4c84fcdc]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#fff}.fade-enter-active[data-v-4c84fcdc],.fade-leave-active[data-v-4c84fcdc]{transition:opacity .35s}.fade-enter[data-v-4c84fcdc],.fade-leave-to[data-v-4c84fcdc]{opacity:0}",""]),t.exports=e},498:function(t,e,r){"use strict";r(445)},499:function(t,e,r){(e=r(58)(!1)).push([t.i,".atom-upload[data-v-97f327dc]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:200px;background-color:#d3d3d3}.atom-upload.highlight[data-v-97f327dc],.atom-upload[data-v-97f327dc]:hover{background-color:grey}.atom-upload input[data-v-97f327dc]{position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer;opacity:0}.atom-upload span[data-v-97f327dc]{display:block}",""]),t.exports=e},502:function(t,e,r){"use strict";r(446)},503:function(t,e,r){(e=r(58)(!1)).push([t.i,"div[data-v-51517435]{position:relative;background-color:#000}div svg[data-v-51517435]{height:inherit}div circle[data-v-51517435]{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}div span[data-v-51517435]{position:absolute;top:50%;left:50%;color:#fff;transform:translate(-50%,-50%)}",""]),t.exports=e},505:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return l}));r(364),r(8),r(406),r(410),r(411),r(412),r(413),r(414),r(415),r(416),r(417),r(418),r(419),r(420),r(421),r(422),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432);var n=r(179),o=r(180),c=r(506),l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:48e3;Object(n.a)(this,e),this.duration=t,this.frequency=r,this.hz=o}return Object(o.a)(e,[{key:"getBuffer",value:function(){for(var e=2*this.frequency*Math.PI,r=(new(t.AudioContext||t.webkitAudioContext)).createBuffer(1,this.hz*this.duration,this.hz),n=r.getChannelData(0),o=0;o<r.length;o++)n[Number(o)]=f(o,this.hz,e);return new Uint8Array(c(r))}}]),e}();function f(t,e,r){var n=t/e*r;return Math.sin(n)}}).call(this,r(32))},507:function(t,e,r){"use strict";r(447)},508:function(t,e,r){(e=r(58)(!1)).push([t.i,'.molecule_upload-modifier .container[data-v-e851dff6]{position:relative;width:200px;height:200px;overflow:hidden;background-color:#000;border:2px solid red;border-radius:20px}.molecule_upload-modifier .progress[data-v-e851dff6]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.molecule_upload-modifier .preview[data-v-e851dff6]{width:100%;height:100%;transform:translateY(-100%);font-family:"object-fit:cover";object-fit:cover}',""]),t.exports=e},509:function(t,e,r){"use strict";r(448)},510:function(t,e,r){(e=r(58)(!1)).push([t.i,"div[data-v-47c39e7e]{margin-top:100px}div ul[data-v-47c39e7e]{padding:0;margin:0;list-style:none}",""]),t.exports=e}}]);