(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{110:function(t,e,r){"use strict";r.r(e);var n=r(253),o=r.n(n),video=r(234);function c(t,e,r,n,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void r(t)}d.done?e(f):Promise.resolve(f).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var l=t.apply(e,r);function d(t){c(l,n,o,d,f,"next",t)}function f(t){c(l,n,o,d,f,"throw",t)}d(void 0)}))}}var d=["video/quicktime","video/mp4"];class f{constructor(data){this.data=data,this.name=data.name}hasValidSize(){return this.data.size<188743680}hasValidMimeType(){var t=this;return l((function*(){var e=yield t.getMimeType();return d.includes(e)}))()}hasValidLength(){var t=this;return l((function*(){return!!(yield t.hasValidMimeType())&&(yield Object(video.a)(yield t.getObjectUrl()))<60}))()}getMimeType(){var t=this;return l((function*(){var e=yield t.getBuffer();return(yield o.a.fromBuffer(e)).mime}))()}getObjectUrl(){var t=this;return l((function*(){return URL.createObjectURL(yield t.getBlob())}))()}getBlob(){var t=this;return l((function*(){return new Blob([yield t.getBuffer()],t.getMimeType())}))()}getBuffer(){return new Promise(t=>{var e=new FileReader;e.addEventListener("load",(function(){t(new Uint8Array(e.result))}),!1),e.readAsArrayBuffer(this.data)})}}var v={props:{text:{type:String,default:null}}},h=(r(277),r(7)),m=Object(h.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("span",{key:this.text},[this._v(this._s(this.text))])])}),[],!1,null,"4c84fcdc",null).exports;function y(t,e,r,n,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void r(t)}d.done?e(f):Promise.resolve(f).then(n,o)}var w={components:{AtomTextToggle:m},data:()=>({error:null,highlight:!1}),methods:{onChange(t){var e=this,{target:{files:r}}=t;Array.from(r).map(t=>new f(t)).map(function(){var t,r=(t=function*(t){(yield t.hasValidMimeType())?(yield t.hasValidLength())?t.hasValidSize()?e.$emit("files-change",t):e.error="file is too big":e.error="your video is too long":e.error="wrong file format"},function(){var e=this,r=arguments;return new Promise((function(n,o){var c=t.apply(e,r);function l(t){y(c,n,o,l,d,"next",t)}function d(t){y(c,n,o,l,d,"throw",t)}l(void 0)}))});return function(t){return r.apply(this,arguments)}}())},hover(t){this.highlight=t}}},x=(r(279),Object(h.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"atom-upload",class:{highlight:t.highlight},on:{dragenter:function(e){return t.hover(!0)},dragover:function(e){return t.hover(!0)},dragleave:function(e){return t.hover(!1)},drop:function(e){return t.hover(!1)}}},[r("input",{attrs:{type:"file"},on:{change:t.onChange}}),t._v(" "),r("div",[r("span",[t._v("Drag & Drop File")]),t._v(" "),r("atom-text-toggle",{attrs:{text:t.error}})],1)])}),[],!1,null,"97f327dc",null).exports),_={props:{radius:{type:Number,default:1},progress:{type:Number,default:0},stroke:{type:Number,default:1}},data(){var t=this.radius-2*this.stroke;return{normalizedRadius:t,circumference:2*t*Math.PI}},computed:{viewBox(){return"0 0 ".concat(2*this.radius," ").concat(2*this.radius)},strokeDashoffset(){return this.circumference-this.progress/100*this.circumference},percentage(){return this.progress.toFixed(2)}}},j=(r(281),Object(h.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("svg",{attrs:{viewBox:t.viewBox}},[r("circle",{style:{strokeDashoffset:t.strokeDashoffset},attrs:{stroke:"white",fill:"transparent","stroke-dasharray":t.circumference+" "+t.circumference,"stroke-width":t.stroke,r:t.normalizedRadius,cx:t.radius,cy:t.radius}})]),t._v(" "),r("span",[t._v(t._s(t.percentage)+"%")])])}),[],!1,null,"51517435",null).exports);function k(){return new Worker(r.p+"worker.37b90c330055173ff388.worker.js")}var M=r(101),O=r(28),P=r(58),map=r(11),filter=r(178),B=r(283),C=r.n(B),A=r(284);function z(t,e,r,n,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void r(t)}d.done?e(f):Promise.resolve(f).then(n,o)}function T(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var c=t.apply(e,r);function l(t){z(c,n,o,l,d,"next",t)}function d(t){z(c,n,o,l,d,"throw",t)}l(void 0)}))}}function E(){var t={ready:new M.a(1),start:new O.a,done:new O.a,info:new M.a(1),progress:new O.a,error:new M.a(1)};t.info.next("initialize");var e=new k,r=Object(P.a)(e,"message").pipe(Object(map.a)(t=>t.data));return r.pipe(Object(filter.a)(data=>"ready"===data.type)).subscribe(r=>{t.ready.next(e)}),r.pipe(Object(filter.a)(data=>"stdout"===data.type)).subscribe(e=>{var{data:data}=e;C()(data,e=>{var{ratio:r}=e;t.progress.next(r)})}),r.pipe(Object(filter.a)(data=>"start"===data.type)).subscribe(e=>{var{data:data}=e;t.start.next(data),t.info.next("start conversion")}),r.pipe(Object(filter.a)(data=>"done"===data.type)).subscribe(function(){var r=T((function*(r){var{data:data}=r;e.terminate(),t.info.next("finished conversion"),t.done.next(yield new f(new Blob([data[0].data])).getObjectUrl())}));return function(t){return r.apply(this,arguments)}}()),t}function S(t){return U.apply(this,arguments)}function U(){return(U=T((function*(t){return Promise.all([t.getBuffer().then(data=>({name:t.name,data:data})),Object(video.a)(yield t.getObjectUrl()).then(e=>({name:"".concat(t.name,".wav"),data:new A.a(e).getBuffer()}))])}))).apply(this,arguments)}function $(t){var e=E();return e.ready.subscribe(r=>{e.info.next("load file"),function(t,e){D.apply(this,arguments)}(r,t)}),e}function D(){return(D=T((function*(t,e){var r=yield S(e);t.postMessage({type:"command",arguments:["-i",e.name,"-i","".concat(e.name,".wav"),"-strict","-2","-ac","2","-preset","ultrafast","-map_metadata:s:v","0:s:v","-map_metadata:s:a","0:s:a","-filter_complex","[0:v]setpts=0.98*PTS,scale=iw/2:ih/2,showinfo[v];[0:a]volume=1[a0];[1:a]volume=1.75[a1];[a0]atempo=1.02[a00];[a00][a1]amix=inputs=2:duration=first:dropout_transition=2[a]","-map","[v]","-map","[a]","output.mp4"],files:r})}))).apply(this,arguments)}function R(t,e,r,n,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void r(t)}d.done?e(f):Promise.resolve(f).then(n,o)}var V={components:{AtomUpload:x,AtomProgress:j,AtomTextToggle:m},props:{id:{type:String,default:null}},data(){return{stats:this.resetStats()}},methods:{resetStats:t=>({blob:null,info:null,error:t,progress:0,upload:null}),onFilesChange(t){var e,r=this;return(e=function*(){var e=r.stats=r.resetStats();e.upload=yield t.getObjectUrl();var n=yield r.observeConversion(yield $(t),e);r.$emit("ready",{id:r.id,stats:n})},function(){var t=this,r=arguments;return new Promise((function(n,o){var c=e.apply(t,r);function l(t){R(c,n,o,l,d,"next",t)}function d(t){R(c,n,o,l,d,"throw",t)}l(void 0)}))})()},observeConversion(t,e){return t.start.subscribe(t=>{console.log(t)}),t.progress.subscribe(progress=>{e.progress=100*progress}),t.info.subscribe(t=>{e.info=t}),t.error.subscribe(t=>{this.stats=this.resetStats(t)}),new Promise(r=>{t.done.subscribe(t=>{e.blob=t,r(e)})})}}},F=(r(286),Object(h.a)(V,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"molecule_upload-modifier"},[r("div",{staticClass:"container"},[t.stats.upload?t._e():r("atom-upload",{staticClass:"upload",on:{"files-change":t.onFilesChange}}),t._v(" "),t.stats.progress?t._e():r("atom-text-toggle",{attrs:{text:t.stats.info}}),t._v(" "),t.stats.progress?r("atom-progress",{staticClass:"progress",attrs:{stroke:5,radius:60,progress:t.stats.progress}}):t._e(),t._v(" "),t.stats.blob?r("video",{ref:"video",staticClass:"preview",attrs:{src:t.stats.blob,controls:"",playsinline:""}}):t._e()],1),t._v(" "),t.stats.blob?r("a",{attrs:{href:t.stats.blob,download:t.stats.upload.name}},[t._v("Download")]):t._e()])}),[],!1,null,"e851dff6",null).exports),L=r(213).a;function N(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}var W={components:{MoleculeUploadModifier:F,MoleculeWavesurfer:Object(h.a)(L,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"waveform"})])}),[],!1,null,null,null).exports},data:()=>({conversions:[{id:N(),stats:null}]}),methods:{onReady(t){console.log(t),this.conversions.find(e=>{var{id:r}=e;return r===t.id}).stats=t.stats,this.conversions.push({id:N(),stats:null})}}},I=(r(288),Object(h.a)(W,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("ul",t._l(t.conversions,(function(e,n){var o=e.id,c=e.stats;return r("li",{key:n},[r("molecule-upload-modifier",{attrs:{id:o},on:{ready:t.onReady}}),t._v(" "),c?r("molecule-wavesurfer",{attrs:{stats:c}}):t._e()],1)})),0)])}),[],!1,null,"47c39e7e",null));e.default=I.exports},213:function(t,e,r){"use strict";(function(t){function n(t,e,r,n,o,c,l){try{var d=t[c](l),f=d.value}catch(t){return void r(t)}d.done?e(f):Promise.resolve(f).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,c){var l=t.apply(e,r);function d(t){n(l,o,c,d,f,"next",t)}function f(t){n(l,o,c,d,f,"throw",t)}d(void 0)}))}}function c(e){var video=t.document.createElement("video");return video.src=e,video}e.a={props:{stats:{type:Object,default:()=>null}},data:()=>({list:[],wavesurfer:null,playing:!1}),computed:{buttonText(){return this.playing?"Pause":"Play"}},mounted(){var t=this;[c(this.stats.upload),c(this.stats.blob)].forEach(function(){var e=o((function*(e){var r=yield t.initializeWavesurfer();r.load(e),t.list.push(r)}));return function(t){return e.apply(this,arguments)}}())},methods:{initializeWavesurfer(){var t=this;return o((function*(){return(yield r.e(31).then(r.t.bind(null,311,7))).default.create({container:t.$refs.waveform,waveColor:"#A8DBA8",progressColor:"#3B8686",splitChannels:!1,interact:!1,backend:"MediaElement"})}))()}}}}).call(this,r(12))},234:function(t,e,r){"use strict";(function(t){function n(e){return new Promise(r=>{var video=t.document.createElement("video");video.preload="metadata",video.src=e,video.onloadedmetadata=t=>{r(video.duration)}})}r.d(e,"a",(function(){return n}))}).call(this,r(12))},235:function(t,e,r){var content=r(278);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("d7b4aa3e",content,!0,{sourceMap:!1})},236:function(t,e,r){var content=r(280);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("d8588cae",content,!0,{sourceMap:!1})},237:function(t,e,r){var content=r(282);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("0f6e229e",content,!0,{sourceMap:!1})},238:function(t,e,r){var content=r(287);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("32d7a630",content,!0,{sourceMap:!1})},239:function(t,e,r){var content=r(289);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("070fa966",content,!0,{sourceMap:!1})},258:function(t,e){},260:function(t,e){},277:function(t,e,r){"use strict";r(235)},278:function(t,e,r){(e=r(22)(!1)).push([t.i,"span[data-v-4c84fcdc]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#fff}.fade-enter-active[data-v-4c84fcdc],.fade-leave-active[data-v-4c84fcdc]{transition:opacity .35s}.fade-enter[data-v-4c84fcdc],.fade-leave-to[data-v-4c84fcdc]{opacity:0}",""]),t.exports=e},279:function(t,e,r){"use strict";r(236)},280:function(t,e,r){(e=r(22)(!1)).push([t.i,".atom-upload[data-v-97f327dc]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:200px;background-color:#d3d3d3}.atom-upload.highlight[data-v-97f327dc],.atom-upload[data-v-97f327dc]:hover{background-color:grey}.atom-upload input[data-v-97f327dc]{position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer;opacity:0}.atom-upload span[data-v-97f327dc]{display:block}",""]),t.exports=e},281:function(t,e,r){"use strict";r(237)},282:function(t,e,r){(e=r(22)(!1)).push([t.i,"div[data-v-51517435]{position:relative;background-color:#000}div svg[data-v-51517435]{height:inherit}div circle[data-v-51517435]{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}div span[data-v-51517435]{position:absolute;top:50%;left:50%;color:#fff;transform:translate(-50%,-50%)}",""]),t.exports=e},284:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o}));var n=r(285);class o{constructor(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:48e3;this.duration=t,this.frequency=e,this.hz=r}getBuffer(){for(var e=2*this.frequency*Math.PI,r=(new(t.AudioContext||t.webkitAudioContext)).createBuffer(1,this.hz*this.duration,this.hz),o=r.getChannelData(0),l=0;l<r.length;l++)o[Number(l)]=c(l,this.hz,e);return new Uint8Array(n(r))}}function c(t,e,r){var n=t/e*r;return Math.sin(n)}}).call(this,r(12))},286:function(t,e,r){"use strict";r(238)},287:function(t,e,r){(e=r(22)(!1)).push([t.i,'.molecule_upload-modifier .container[data-v-e851dff6]{position:relative;width:200px;height:200px;overflow:hidden;background-color:#000;border:2px solid red;border-radius:20px}.molecule_upload-modifier .progress[data-v-e851dff6]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.molecule_upload-modifier .preview[data-v-e851dff6]{width:100%;height:100%;transform:translateY(-100%);font-family:"object-fit:cover";object-fit:cover}',""]),t.exports=e},288:function(t,e,r){"use strict";r(239)},289:function(t,e,r){(e=r(22)(!1)).push([t.i,"div[data-v-47c39e7e]{margin-top:100px}div ul[data-v-47c39e7e]{padding:0;margin:0;list-style:none}",""]),t.exports=e}}]);